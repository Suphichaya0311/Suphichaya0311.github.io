<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ปฏิทินความทรงจำ</title>

<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Itim',cursive;
  background:linear-gradient(180deg,#fff1f6,#ffe6ef);
  color:#7a4a5a;
  overflow:hidden;
}

/* เอฟเฟกต์ */
.sparkle,.heart{
  position:fixed;
  z-index:1;
}
.sparkle{
  top:-10px;width:6px;height:6px;
  background:white;border-radius:50%;
  animation:fall 8s linear infinite;
}
@keyframes fall{to{transform:translateY(120vh)}}
.heart{
  bottom:-20px;font-size:22px;color:#ff8fb1;
  animation:up 6s linear infinite;
}
@keyframes up{to{transform:translateY(-120vh)}}

/* เลื่อน */
.scroll{
  height:100vh;
  overflow-y:auto;
  padding:30px 15px;
  position:relative;
  z-index:2;
}

/* กล่อง */
.card{
  background:white;
  border-radius:40px;
  padding:30px;
  max-width:900px;
  margin:40px auto;
  box-shadow:0 30px 60px rgba(255,160,190,.45);
}

/* หัว */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
button{
  border:none;
  background:#ffb6cc;
  color:white;
  padding:10px 18px;
  border-radius:20px;
  font-family:'Itim';
  cursor:pointer;
}
button:hover{background:#ff8fb1}

/* ปฏิทิน */
.calendar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:10px;
  margin-top:20px;
}
.day{
  background:#fff5f8;
  border-radius:18px;
  padding:14px 0;
  text-align:center;
}
.hasImg{
  cursor:pointer;
  background:#ffdce8;
}
.hasImg:hover{transform:scale(1.1)}
.empty{background:transparent}

/* popup */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.popupBox{
  background:white;
  padding:20px;
  border-radius:30px;
  text-align:center;
}
.popupBox img{
  max-width:80vw;
  border-radius:25px;
  margin-bottom:15px;
}
</style>
</head>

<body>

<script>
for(let i=0;i<35;i++){
  let s=document.createElement("div");
  s.className="sparkle";
  s.style.left=Math.random()*100+"vw";
  s.style.animationDelay=Math.random()*8+"s";
  document.body.appendChild(s);

  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML="❤";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=4+Math.random()*4+"s";
  document.body.appendChild(h);
}
</script>

<div class="scroll">
  <div class="card">
    <div class="header">
      <button onclick="prevMonth()">◀</button>
      <h2 id="monthYear"></h2>
      <button onclick="nextMonth()">▶</button>
    </div>

    <div class="calendar" id="calendar"></div>
  </div>
</div>

<!-- popup -->
<div class="popup" id="popup">
  <div class="popupBox">
    <img id="popupImg">
    <br>
    <button onclick="closeImg()">ปิด</button>
    <button onclick="location.href='home.html'">ออกไปหน้าแรก</button>
  </div>
</div>

<script>
let current = new Date(2023,11); // ธ.ค. 2566

function render(){
  const cal=document.getElementById("calendar");
  cal.innerHTML="";
  const y=current.getFullYear();
  const m=current.getMonth();

  document.getElementById("monthYear").innerText =
    current.toLocaleDateString('th-TH',{month:'long',year:'numeric'});

  let first=new Date(y,m,1).getDay();
  let days=new Date(y,m+1,0).getDate();

  for(let i=0;i<first;i++)
    cal.innerHTML+=`<div class="day empty"></div>`;

  for(let d=1;d<=days;d++){
    let file=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}.jpg`;

    if(d==20 || (y==2023 && m==11 && d==6)){
      cal.innerHTML+=`
      <div class="day hasImg" onclick="openImg('${file}')">${d}</div>`;
    }else{
      cal.innerHTML+=`<div class="day">${d}</div>`;
    }
  }
}

function prevMonth(){
  if(current > new Date(2023,11)){
    current.setMonth(current.getMonth()-1);
    render();
  }
}
function nextMonth(){
  if(current < new Date(2025,11)){
    current.setMonth(current.getMonth()+1);
    render();
  }
}
function openImg(src){
  document.getElementById("popupImg").src=src;
  document.getElementById("popup").style.display="flex";
}
function closeImg(){
  document.getElementById("popup").style.display="none";
}

render();
</script>

</body>
</html>
